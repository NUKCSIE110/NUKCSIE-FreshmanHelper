<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>高大資工新生資訊系統</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase.js"></script>
    <script src="js/jQuery.js"></script>
    <script>
        $(document).ready(function () {
            $('.chat-header').click(function () {
                if ($('.chatroom').hasClass('hide-chat')) {
                    $('.chatroom').removeClass('hide-chat');
                    $('.chatroom').addClass('show-chat');
                }
                else {
                    $('.chatroom').addClass('hide-chat');
                    $('.chatroom').removeClass('show-chat');
                }
                //$('#messagesDiv').toggle();
                //$('#nameInput').toggle();
                //$('#messageInput').toggle();
            });
        });

    </script>
    <script src="js/meal.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt"
        crossorigin="anonymous">
    <style>
        a {
            color: rgb(109, 109, 109);
        }

        #map {
            height: 450px;
        }
    </style>
</head>

<body>
    <a href="/">
        <div class="nav">
            <img class="logo" src="logo.png" alt="">
            <h1>三餐問題</h1>
        </div>
    </a>
    <div class="chatroom hide-chat">
        <div class="chat-header"><h3>聊天室</h3></div>
        <div id='messagesDiv'>Loading...</div>
        <div class="textbox">
            <input type='text' id='nameInput' placeholder='暱稱'>
            <input type='text' id='messageInput' placeholder='訊息(按Enter送出)'>
        </div>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyAS7FClisBODADJgCpLSf67P4Wgv3szcTg",
                authDomain: "chatroom-5b1d0.firebaseapp.com",
                databaseURL: "https://chatroom-5b1d0.firebaseio.com",
                projectId: "chatroom-5b1d0",
                storageBucket: "",
                messagingSenderId: "336744192990"
            };
            firebase.initializeApp(config);
            var database = firebase.database().ref();
            //var myDataRef = new firebase('https://chatroom-5b1d0.firebaseio.com');
            $('#messageInput').keypress(function (e) {
                if (e.keyCode == 13) {
                    var name = $('#nameInput').val();
                    var text = $('#messageInput').val();
                    database.push({ name: name, text: text });
                    $('#messageInput').val('');
                }
            });
            database.on('child_added', function (snapshot) {
                var message = snapshot.val();
                displayChatMessage(message.name, message.text);
            });
            function displayChatMessage(name, text) {
                $('<div/>').text(text).prepend($('<strong/>').text(name + ': ')).appendTo($('#messagesDiv'));
                $('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;
            };
        </script>
    </div>
    <div class="wrap">
        <div class="meal-info">
            <table>
                <tr>
                    <th>店名</th>
                    <th>地址</th>
                    <th>早餐</th>
                    <th>中餐</th>
                    <th>晚餐</th>
                    <th>地圖</th>
                </tr>
                <tr>
                    <td>美而美</td>
                    <td>811高雄市楠梓區大學六十街</td>
                    <td>V</td>
                    <td>V</td>
                    <td>X</td>
                    <td>
                        <div class="show-meal-map">
                            <a onclick="find('美而美')">
                                <i class="fas fa-map-marked-alt"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>臻品營養飯糰</td>
                    <td>811高雄市楠梓區大學西路</td>
                    <td>V</td>
                    <td>V</td>
                    <td>X</td>
                    <td>
                        <div class="show-meal-map">
                            <a onclick="find('臻品營養飯糰')">
                                <i class="fas fa-map-marked-alt"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>三郎(月底好夥伴)</td>
                    <td>811高雄市楠梓區大學西路</td>
                    <td>X</td>
                    <td>V</td>
                    <td>V</td>
                    <td>
                        <div class="show-meal-map">
                            <a onclick="find('三郎(月底好夥伴)')">
                                <i class="fas fa-map-marked-alt"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>後昌自助餐(唯一信仰)</td>
                    <td>811高雄市楠梓區藍昌路369號</td>
                    <td>X</td>
                    <td>V</td>
                    <td>V</td>
                    <td>
                        <div class="show-meal-map">
                            <a onclick="find('後昌自助餐(唯一信仰)')">
                                <i class="fas fa-map-marked-alt"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>丹丹漢堡-右昌店</td>
                    <td>811高雄市楠梓區右昌街255號</td>
                    <td>X</td>
                    <td>V</td>
                    <td>V</td>
                    <td>
                        <div class="show-meal-map">
                            <a onclick="find('丹丹漢堡-右昌店')">
                                <i class="fas fa-map-marked-alt"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>仙女鮮魚湯</td>
                    <td>811高雄市楠梓區軍校路1013號</td>
                    <td>V</td>
                    <td>X</td>
                    <td>宵夜</td>
                    <td>
                        <div class="show-meal-map">
                            <a onclick="find('仙女鮮魚湯')">
                                <i class="fas fa-map-marked-alt"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>軍校四海豆漿</td>
                    <td>811高雄市楠梓區萬昌街51-53號</td>
                    <td>V</td>
                    <td>X</td>
                    <td>V</td>
                    <td>
                        <div class="show-meal-map">
                            <a onclick="find('軍校四海豆漿')">
                                <i class="fas fa-map-marked-alt"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>鮮茶道</td>
                    <td>811高雄市楠梓區高雄市楠梓區藍昌路398之16號</td>
                    <td>X</td>
                    <td>V</td>
                    <td>V</td>
                    <td>
                        <div class="show-meal-map">
                            <a onclick="find('鮮茶道')">
                                <i class="fas fa-map-marked-alt"></i>
                            </a>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td>吳家紅茶冰</td>
                    <td>811高雄市楠梓區藍昌路396號</td>
                    <td>X</td>
                    <td>V</td>
                    <td>V</td>
                    <td>
                        <div class="show-meal-map">
                            <a onclick="find('吳家紅茶冰')">
                                <i class="fas fa-map-marked-alt"></i>
                            </a>
                        </div>
                    </td>
                </tr>

            </table>
        </div>
        <div class="eatwhat">
            <a onclick="random()">
                幫我決定 我不想動腦 _(:з」∠)_
            </a>
            <div class="eathis"></div>
        </div>
        <div class="map">
            <div id="map" item-width="100%" item-height="450px"></div>
            <script>
                function initMap() {
                    var map = new google.maps.Map(document.getElementById('map'), {
                        zoom: 13.75,
                        center: { lat: 22.725738, lng: 120.296071 }
                    });
                    var labels = 'A';
                    var markers = locations.map(function (location, i) {
                        return new google.maps.Marker({
                            position: location,
                            label: labels[i % labels.length]
                        });
                    });
                    var markerCluster = new MarkerClusterer(map, markers,
                        { imagePath: 'https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m' });
                }
                var locations = [{ lat: 25.033977, lng: 121.563998 }, { lat: 22.734007, lng: 120.282764 },
                { lat: 22.732156, lng: 120.292273 }, { lat: 22.732149, lng: 120.285153 },
                { lat: 22.729946, lng: 120.272362 }, { lat: 22.731787, lng: 120.276449 },
                { lat: 22.731855, lng: 120.276130 }, { lat: 22.717680, lng: 120.291067 },
                { lat: 22.712973, lng: 120.289605 }, { lat: 22.709881, lng: 120.293052 },
                { lat: 22.726399, lng: 120.308160 }, { lat: 22.726482, lng: 120.306106 },
                { lat: 22.727596, lng: 120.309813 }, { lat: 22.725960, lng: 120.301013 },
                { lat: 22.725002, lng: 120.299082 }, { lat: 22.724661, lng: 120.296889 },
                { lat: 22.723304, lng: 120.295172 }, { lat: 22.723701, lng: 120.293577 },
                { lat: 22.726586, lng: 120.291354 }, { lat: 22.725445, lng: 120.291262 },
                { lat: 22.718454, lng: 120.284413 }, { lat: 22.718626, lng: 120.284926 },
                { lat: 22.719170, lng: 120.283131 }, { lat: 22.727119, lng: 120.281961 },
                { lat: 22.725092, lng: 120.298987 }, { lat: 22.725070, lng: 120.296998 },
                { lat: 22.726551, lng: 120.291793 }, { lat: 22.727915, lng: 120.290732 },
                { lat: 22.732365, lng: 120.292581 }, { lat: 22.732194, lng: 120.285909 },
                { lat: 22.731958, lng: 120.276276 }, { lat: 22.732060, lng: 120.276218 },
                { lat: 22.732176, lng: 120.276054 }, { lat: 22.732107, lng: 120.286179 },
                { lat: 22.727493, lng: 120.289962 }, { lat: 22.723966, lng: 120.297591 },
                { lat: 22.719936, lng: 120.287806 }, { lat: 22.718353, lng: 120.285179 },
                { lat: 22.711431, lng: 120.292125 }, { lat: 22.713271, lng: 120.290581 },
                { lat: 22.708443, lng: 120.298579 }, { lat: 22.727589, lng: 120.325486 },
                { lat: 22.732108, lng: 120.276194 }, { lat: 22.726765, lng: 120.255278 },
                { lat: 22.719786, lng: 120.311301 }, { lat: 22.718607, lng: 120.292070 },
                { lat: 22.721093, lng: 120.291203 }, { lat: 22.725011, lng: 120.299928 },
                { lat: 22.724362, lng: 120.297556 }, { lat: 22.724133, lng: 120.291576 },
                { lat: 22.713117, lng: 120.289760 }, { lat: 22.725829, lng: 120.300492 }]
            </script>
            <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>
            <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDTd7L2_IDc2M7LHCV-HrQTZKGf7cGJyp4&callback=initMap"></script>
        </div>
    </div>
</body>

</html>
