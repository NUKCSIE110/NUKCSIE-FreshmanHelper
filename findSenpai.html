<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>高大資工新生資訊系統</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://www.gstatic.com/firebasejs/5.1.0/firebase.js"></script>
    <script src="js/jQuery.js"></script>
    <script>
        $(document).ready(function () {
            $('.chat-header').click(function () {
                if ($('.chatroom').hasClass('hide-chat')) {
                    $('.chatroom').removeClass('hide-chat');
                    $('.chatroom').addClass('show-chat');
                }
                else {
                    $('.chatroom').addClass('hide-chat');
                    $('.chatroom').removeClass('show-chat');
                }
                //$('#messagesDiv').toggle();
                //$('#nameInput').toggle();
                //$('#messageInput').toggle();
            });
        });

    </script>
    <script src="js/findSenpai.js"></script>
    <style>
        a {
            color: rgb(109, 109, 109);
        }
    </style>
</head>
<body>
    <a href="/">
    <div class="nav">
        <img class="logo" src="logo.png" alt="">
        <h1>找直屬(尚未開放)</h1>
    </div>
    </a>
    <div class="chatroom hide-chat">
        <div class="chat-header"><h3>聊天室</h3></div>
        <div id='messagesDiv'>Loading...</div>
        <div class="textbox">
            <input type='text' id='nameInput' placeholder='暱稱'>
            <input type='text' id='messageInput' placeholder='訊息(按Enter送出)'>
        </div>
        <script>
            // Initialize Firebase
            var config = {
                apiKey: "AIzaSyAS7FClisBODADJgCpLSf67P4Wgv3szcTg",
                authDomain: "chatroom-5b1d0.firebaseapp.com",
                databaseURL: "https://chatroom-5b1d0.firebaseio.com",
                projectId: "chatroom-5b1d0",
                storageBucket: "",
                messagingSenderId: "336744192990"
            };
            firebase.initializeApp(config);
            var database = firebase.database().ref();
            //var myDataRef = new firebase('https://chatroom-5b1d0.firebaseio.com');
            $('#messageInput').keypress(function (e) {
                if (e.keyCode == 13) {
                    var name = $('#nameInput').val();
                    var text = $('#messageInput').val();
                    database.push({ name: name, text: text });
                    $('#messageInput').val('');
                }
            });
            database.on('child_added', function (snapshot) {
                var message = snapshot.val();
                displayChatMessage(message.name, message.text);
            });
            function displayChatMessage(name, text) {
                $('<div/>').text(text).prepend($('<strong/>').text(name + ': ')).appendTo($('#messagesDiv'));
                $('#messagesDiv')[0].scrollTop = $('#messagesDiv')[0].scrollHeight;
            };
        </script>
    </div>
    <div class="senpai-info">
            <form action="">
                <p>請輸入你的學號(ex A1075599)</p>
                <input type="text" id="user" disabled>
                <p>請輸入你的生日(ex 880901)</p>
                <input type="text" id="date" disabled>
            </form>
            <!-- <button onclick="find()">找直屬!</button> -->
        </div>
        <div class="response">
            <div>
                <h3>張寶茸</h3>
                <a href="">www.facebook.com/brchang</a>
            </div>
        </div>
</body>
</html>
